<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>注册界面</title>
	<link rel="stylesheet" href="css/zhuse.css">
</head>
<body>
	<!-- header -->
    <div class="header">
		<img src="img/vans-logo.svg" alt="">
		<div class="rightTop" id="box1">
			<a href="goshopping.html"><ul><li><img src="img/1.png" alt="">我的购物车</li></ul></a>
			<a href="loge.html">
				<ul>
					<li><img src="img/2.png" alt="">登录&nbsp;&nbsp;/</li>
				</ul>
			</a>
			<a href="zhuse.html">
					<ul>
						<li>注册</li>
					</ul>
			</a>
			<a href="#"><ul><li><img src="img/3.png" alt="">搜索店铺</li></ul></a>
		</div>

		<div class="bottonC">
			<a href="#">
				<ul>
					<li>
						<a href="关于VANS.html">关于VANS
							<img src="img/4.png" alt="">/  
							<span class="San"></span>
							<div class="noneS">
								<div class="leftt">
									<a href="#">THIS IS OFF THE WELL</a>
									<a href="#">运动员</a>
								</div>
								<div class="rightt">
									<a href="#">HOUSE OF VANS</a>
									<a href="#">VANS定制鞋大赛</a>
									<a href="#">MUSICIANS成为VANS音乐人</a>
								</div>
								<div class="rightt">
									<a href="#">新闻</a>
								</div>
							</div>
						</a> 
					</li>                        
					<li>
						<a href="remen.html"> 热门
							<img src="img/4.png" alt="">/ 
							<span class="San"></span>
							<div class="noneS w2">
								<div class="leftt lef">
									<a href="#">热门产品</a>
								</div>
								<div class="rightt">
									<a href="#">热门活动</a>
								</div>
							</div>
						</a>
					</li>
					<li>
						<a href="boys.html">男子
							<img src="img/4.png" alt="">/
							<span class="San"></span>
							<div class="noneS w3">
								<div class="leftt le3">
									<a href="#" class="yS">鞋款</a>
									<a href="#">Authentic</a>
									<a href="#">Era</a>
									<a href="#">Slip-On</a>
									<a href="#">Old Skool</a>
									<a href="#">Sk8-Hi</a>
									<a href="#">WVAULT系列</a>
									<a href="#">经典系列</a>
									<a href="#">Comfycush系列</a>
									<a href="#">滑板系列</a>
									<a href="#">冲浪系列</a>
								</div>
								<div class="rightt le3 le4">
										<a href="#">服装</a>
										<a href="#">T桖</a>
										<a href="#">卫衣</a>
										<a href="#">棉衣/夹克</a>
										<a href="#">短裤/沙滩裤</a>
										<a href="#">长裤</a>
								</div>
								<div class="rightt le3 le4">
									<a href="#">配件</a>
									<a href="#">背包</a>
									<a href="#">腰带</a>
									<a href="#">钱包</a>
									<a href="#">袜子</a>
									<a href="#">帽子</a>
								</div>
								<div class="rightt le5" id="ims">
									<a href="#" class="imga"><img src="img/2.jpg" alt=""></a>
								</div>
							</div>
						</a>
					</li>
					<li>
						<a href="girl.html">女子
								<img src="img/4.png" alt="">/
								<span class="San"></span>
								<div class="noneS w3">
									<div class="leftt le3">
										<a href="#" class="yS">鞋款</a>
										<a href="#">Authentic</a>
										<a href="#">Era</a>
										<a href="#">Slip-On</a>
										<a href="#">Old Skool</a>
										<a href="#">Sk8-Hi</a>
										<a href="#">WVAULT系列</a>
										<a href="#">经典系列</a>
										<a href="#">Comfycush系列</a>
										<a href="#">滑板系列</a>
										<a href="#">冲浪系列</a>
									</div>
									<div class="rightt le3 le4">
											<a href="#">服装</a>
											<a href="#">T桖</a>
											<a href="#">卫衣</a>
											<a href="#">棉衣/夹克</a>
											<a href="#">短裤/沙滩裤</a>
											<a href="#">长裤</a>
									</div>
									<div class="rightt le3 le4">
										<a href="#">配件</a>
										<a href="#">背包</a>
										<a href="#">腰带</a>
										<a href="#">钱包</a>
										<a href="#">袜子</a>
										<a href="#">帽子</a>
									</div>
									<div class="rightt le5" id="ims">
										<a href="#" class="imga"><img src="img/2.jpg" alt=""></a>
									</div>
							</div>
						</a>
					</li>
					<li>
					<a href="bodys.html">童鞋
							<img src="img/4.png" alt="">/
							<span class="San"></span>
							<div class="noneS w3 w4">
								<div class="leftt le3">
									<a href="#" class="yS">小童（0~3）岁</a>
								</div>
								<div class="leftt le3">
								</div>
								<div class="rightt le3 le4">
									<a href="#">中大童（4岁以上）</a>
								</div>
								<div class="rightt le5" id="ims">
									<a href="#">
										<img class="imga" src="img/2.jpg" alt=""></a>
								</div>
							</div>
						</a>
					</li>
					<li><a href="#">CUSTOML定制鞋<img src="img/4.png" alt="">/</a> </li>
					<li>
						<a href="#">更多产品
							<img src="img/4.png" alt=""> 
							<span class="San"></span>
							<div class="noneS w2">
								<div class="leftt lef">
									<a href="#">THIS IS OFF THE WELL</a>
									<a href="#">运动员</a>
								</div>
								<div class="rightt">
									<a href="#">HOUSE OF VANS</a>
								</div>
								<div class="rightt">
									<a href="#">新闻</a>
								</div>
							</div>
						</a> 
					</li>
					<div class="rightBottom">
						搜索VANS <img src="img/5.png" alt="">
					</div>
				</ul>
				</a>
		</div>   
	</div> 
	<!-- second -->
    <div class="second"></div>
	<!-- three -->
	<div class="three">
		<div class="boeD">
			<div class="foot">
				<h2>用户注册</h2>
			</div>
			<form action="" class="ve">
				<input id="username" class="forms" type="text" onblur="checkuser(this)" placeholder="请输入11位手机号">
				<span class="tiS"></span>
				<input id="userpass"  class="forms" type="password" placeholder="8-12个字母、数字或符合组合，请不要输入特殊字符">
				<span class="tiS mi"></span><br>	
				<input id="checkpass" class="forms" type="password" placeholder="再次输入密码">
				<span class="tiS mi miT"></span>
				<input id="bute" class="forms yanZ" type="text">
				<span class="tiS mi miT miB"></span>
				<input id="yazC" class="forms yanC" type="button" value="获取验证码">
			</form>

			
			<form action="">
				<input id="btnReg" class="formt fir" type="button" value="立即注册">
			</form>
			<div class="bot">
				<form action="">
					<input type="checkbox" checked>我以阅读并同意VANS协议的隐私政策和使用条款 
				</form>
			</div>
			<div id="messageBox"></div>
		</div>
	</div>

	<!--  footer -->
	<div class="footer">
			<div class="fiste">
				 <div class="ff">
					 <h4>获取帮助</h4>
					 <a href="#">购物</a>
					 <a href="#">男子</a>
					 <a href="#">女子</a>
					 <a href="#">CUTHOUCK</a>
					 <a href="#">VNASCOLOR</a>
					 <a href="#">职业鞋款</a>
					 <a href="#">查找店铺</a>
				 </div>
				 <div class="ff ws">
					 <a href="#" class="Wh">公司</a>
					 <a href="#">男子</a>
					 <a href="#">女子</a>
					 <a href="#">CUTHOUCK</a>
					 <a href="#">VNASCOLOR</a>
					 <a href="#">职业鞋款</a>
					 <a href="#">查找店铺</a>
				 </div>
			</div>
			<div class="centC">
				<div class="ff nf">
					 <h4>联系我们</h4>
					 <a href="#" class="Wh">电子邮件</a>
					 <a href="#">CONTACTUS@VANS.COM.CN</a>
					 <a href="#" class="Wh Nt">地址</a>
					 <a href="#" class="dZ">中国上海市南京西路688号8楼</a>
				 </div>
			</div>
			<div class="riG">
					<h4>在这些地方找到我们</h4>
					<div class="imG">
						<div class="fa">
							<div class="tu">
							</div>
						</div>
						<div class="fa">
							<div class="tu er">
							</div>
						</div>
						<div class="fa">
							<div class="tu te">
							</div>
						</div>
						<div class="fa">
							<div class="tu ni">
							</div>
						</div>
					</div>
			</div>
			<div class="bott">
				<img src="img/25.gif" alt="">
				<div class="han">
					<a href="#" id="fis">苏IPC设备123156号</a>
					<a href="#">工信部网站威服服饰（中国）有限公司</a>
					<form action="" class="lasty">
							<select name="" id="">
								<option value="中国">中国</option>
								<option value="">上海</option>
								<option value="">北京</option>
								<option value="">苏州</option>
								<option value="">罗威</option>
								<option value="">意大利</option>
								<option value="">韩国</option>
								<option value="">东京</option>
								<option value="">首尔</option>
								<option value="">莫斯科</option>
							</select>
						</form>
				</div>
			</div>
		</div>
		<div class="guD">
			 <a href=""><img src="img/kf.png" alt=""></a>
			 <a href=""><img src="img/16.jpg" alt=""></a>
			 <a href=""><img src="img/15.png" alt=""></a>
		</div>
</body>
</html>
<script>
	$("#btnReg").onclick = function(){
		//1、
		let xhr = new XMLHttpRequest();
	
		xhr.open("post","php/regSave.php",true);
	
		xhr.onreadystatechange = function(){
			if(xhr.readyState==4 && xhr.status==200){
				if(xhr.responseText=="-1"){
					$("#messageBox").style.color ="rgb(228, 15, 139)";
					$("#messageBox").innerHTML ="用户名已注册，请<a href='loge.html'>登录</a>";
				}else if(xhr.responseText=="0"){
					$("#messageBox").style.color ="rgb(228, 15, 139)";
					$("#messageBox").innerHTML ="注册失败";
				}else if(xhr.responseText=="1"){
					$("#messageBox").style.color ="greenyellow";
					$("#messageBox").innerHTML ="注册成功，请<a href='loge.html'>登录</a>";
				}
			}
		}
		//post方式：设置请求头
		xhr.setRequestHeader("Content-type","application/x-www-form-urlencoded");
		//post方式：把传给服务器端数据（键值对）放在send函数的参数里。
		let sendstr = `username=${$("#username").value}&userpass=${$("#userpass").value}`;
		xhr.send(sendstr);
	
	}
			
	function checkuser(obj){
		let xhr =new XMLHttpRequest();
	
		//2 设置请求参数
		xhr.open("get","checkuser.php?username="+$("#username").value,true);
	
		//3 设置回调函数
		xhr.onreadystatechange = function(){
			if(xhr.readyState==4 && xhr.status==200){
				//5 接收请求
				obj.nextElementSibling.innerHTML =  xhr.responseText;
			}
		}
		//4 发送请求
		xhr.send();
	}
	$("#username").onblur = function(){
				var r =  /^1[3-9]\d{9}$/ 
	
				if(r.test(this.value)){
					this.nextElementSibling.innerHTML =  "";
				}else{
					this.nextElementSibling.innerHTML =  "请输入11位手机号";
					this.nextElementSibling.style.color="red";
				}
			}
	
			// 账户名只能使用数字字母下划线，且数字不能开头，长度在6-15之间
			// 8-12个字母、数字或符合组合，请不要输入特殊字符
			$("#userpass").onblur = function(){
				var r =  /^[a-zA-Z_]\w{5,14}$/ //六位数字，不能以0开头
	
				if(r.test(this.value)){
					this.nextElementSibling.innerHTML =  "";
				}else{
					this.nextElementSibling.innerHTML =  "密码不能以0开头";
					this.nextElementSibling.style.color="red";
				}
			}
	
			//判断密码和重复密码是否一致。
			$("#checkpass").onblur = function(){
	
				if(this.value==$("#userpass").value){
					this.nextElementSibling.innerHTML =  "";
				}else{
					this.nextElementSibling.innerHTML =  "密码与确认密码不符，请重新输入";
					this.nextElementSibling.style.color="red";
				}
			}

		var num;
		$("#yazC").onclick=function(){
			 num=parseInt(Math.random()*1000000);
			// 23456
			var arr=[];
			var temp=num;
			while(temp>0){
				arr.unshift(temp%10);
				temp=parseInt(temp/10);
			}
			alert(num);
		}

		$("#bute").onblur=function(){
        if(this.value==num){
            this.nextElementSibling.innerHTML =  "";
        }else{
            this.nextElementSibling.innerHTML =  "★验证码不正确";
            this.nextElementSibling.style.color="red";
        }
     }
		
			
		function $(str){
				if(str.charAt(0)=="#"){
					return document.getElementById(str.substring(1));
				}else if(str.charAt(0)=="."){
					return document.getElementsByClassName(str.substring(1));
				}else{
					return document.getElementsByTagName(str);
				}
			}	
			
	</script>